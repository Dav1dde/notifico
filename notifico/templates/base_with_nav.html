{% extends "base.html" %}

{# Helper for generating navbar links #}
{% macro _nav(endpoint, text, icon='', title='', active='') %}
	{% set active = active or endpoint %}
	{% set title = title or text %}

	{% if request.endpoint and request.endpoint.startswith(active) %}
	<li class="active">
		<a href="#" title="{{ title }}">
			{{ text }}
		</a>
	</li>
	{% else %}
	<li>
		<a href="{{ url_for(endpoint) }}" title="{{ title }}">
			{{ text }}
		</a>
	</li>
	{% endif %}
{% endmacro %}

{% block style %}
	{{ super() }}
	<style>
		body {
			padding-top: 50px;
			padding-bottom: 20px;
		}
	</style>
{% endblock %}
	
{% block content %}
	{{ super() }}
	<div id="wrap">
		<!-- START Site Nav -->
		<div class="navbar navbar-default navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="/">Notifico</a>
				</div>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav">
						{{ _nav('public.landing', 'Home') }}
						{% if g.user %}
						<!-- START Logged-in user nav -->
						{{ _nav('projects.dashboard', 'My Projects') }}
						<!-- ENDOF Logged-in user nav -->
						{% endif %}
					</ul>
					<ul class="nav navbar-nav pull-right">
						{% if g.user %}
						<!-- START Logged-in user right nav -->
						{{ _nav('account.logout', 'Logout') }}
						<!-- ENDOF Logged-in user right nav -->
						{% else %}
						<!-- START Logged-out user right nav -->
						{{ _nav('account.login', 'Login') }}
						{{ _nav('account.register', 'Sign Up') }}
						<!-- ENDOF Logged-out user right nav -->
						{% endif %}
					</ul>
				</div><!--/.nav-collapse -->
			</div>
		</div>
		<!-- ENDOF Site Nav -->

		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
			<!-- START Messages -->
			{% for category, message in messages %}
				{% if category == 'message' %}
					{% set category = 'info' %}
				{% endif %}
				<div class="alert alert-{{ category }}">
					<div class="container">
						{{ message }}
					</div>
				</div>
			{% endfor %}
			<!-- ENDOF Messages -->
			{% endif %}
		{% endwith %}

		<!-- START block page_content -->
		{% block page_content %}{% endblock %}
		<!-- ENDOF block page_content -->
	</div>
{% endblock %}